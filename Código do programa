#include <Servo.h>

Servo myservo;   

int pos = 0;
int cm = 0;

long readUltrasonicDistance(int triggerPin, int echoPin) {
  pinMode(triggerPin, OUTPUT); 
  digitalWrite(triggerPin, LOW);
  delayMicroseconds(2);
  digitalWrite(triggerPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(triggerPin, LOW);
  pinMode(echoPin, INPUT);
  return pulseIn(echoPin, HIGH);
}

void setup() {
  myservo.attach(9); 
  myservo.write(100); // Define posição inicial
  Serial.begin(9600);
}

void loop() {
  cm = 0.01723 * readUltrasonicDistance(6, 7);

  if (cm < 10) {
    Serial.print(cm);
    Serial.println("cm");

    // Movendo o servo de 100° para 0° mais rápido
    for (pos = 100; pos >= 0; pos -= 2) { 
      myservo.write(pos);             
      delay(10); // Movimento mais rápido                      
    }

    delay(1500); // Mantém 1,5 segundos em 0°

    // Movendo de volta de 0° para 100°
    for (pos = 0; pos <= 100; pos += 2) { 
      myservo.write(pos);
      delay(10);                                      
    }

    delay(2500); // Ajuste para completar 6 segundos totais
  }                          
}
